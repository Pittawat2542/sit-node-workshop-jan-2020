<%- include('includes/head') %> <%- include('includes/navbar') %>

<div class="container">
    <h1 class="primary-font text-center">Todo App</h1>
    <h2 class="secondary-font">Current Todo</h2>
    <ul>
        <% todos.map(todo => { %>
        <li class="mt-3">
            <div class="row">
                <div class="col">
                    <p><%= todo.isDone ? '[/]' : '[X]' %> <%= todo.title %> - <%= todo.detail %></p>
                </div>
                <div class="col d-flex justify-content-around">
                    <% if (todo.isDone) { %>
                    <form method="post" action=<%= '/todos/' + todo.id + '/doing' %>><button class="btn btn-info">Mark as Doing</button></form>
                    <% } else { %>
                        <form method="post" action=<%= '/todos/' + todo.id + '/done' %>><button class="btn btn-success">Mark as Done</button></form method="post">
                    <% } %>
                    <form method="post" action=<%= '/todos/' + todo.id + '/delete' %>><button class="btn btn-danger">Delete</button></form>
                </div>
            </div>
        </li>
        <% }) %>
    </ul>

    <h2 class="secondary-font">Add New Todo</h2>

    <div class="row">
        <div class="col">
            <form action="/todos" method="post">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input
                        type="text"
                        class="form-control"
                        id="title"
                        name="title"
                    />
                </div>
                <div class="form-group">
                    <label for="detail">Detail</label>
                    <textarea
                        class="form-control"
                        id="detail"
                        name="detail"
                    ></textarea>
                </div>
                <button type="submit" class="btn btn-primary">
                    Add New Todo
                </button>
            </form>
        </div>
    </div>
</div>

<%- include('includes/footer') %>
